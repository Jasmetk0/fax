{% extends 'msa/tournament_base.html' %}
{% block tournament_content %}
<div class="flex items-center mt-4">
  <h2 class="text-lg flex-1">Registered Players</h2>
  {% if is_admin %}
  <a href="{% url 'msa:tournament-players-add' tournament.slug %}" target="_blank" class="ml-2 underline">Add Players</a>
  {% endif %}
</div>
<p class="text-sm text-gray-600">{{ ordering_label }}</p>
<table class="mt-4 w-full">
  <thead>
    <tr>
      <th class="text-left">#</th>
      <th class="text-left">Player</th>
      <th class="text-left">Rank</th>
      <th class="text-left">Points</th>
      {% if is_admin %}<th></th>{% endif %}
    </tr>
  </thead>
  <tbody>
    {% for entry in entries %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td>
        {{ entry.player.name }}
        {% if entry.entry_type == 'Q' or entry.entry_type == 'LL' %}
          <span class="ml-1 text-xs">{{ entry.origin_note }}</span>
          {% if entry.origin_match %}
            <a href="{% url 'msa:match-edit' entry.origin_match.pk %}" class="ml-1 text-xs underline">Qualifying match</a>
          {% endif %}
        {% endif %}
      </td>
      <td>{% if entry.rank %}{{ entry.rank }}{% endif %}</td>
      <td>{% if entry.points %}{{ entry.points }}{% endif %}</td>
      {% if is_admin %}
      <td>
        <form method="post" action="{% url 'msa:tournament-player-remove' tournament.slug entry.id %}">
          {% csrf_token %}
          <button type="submit" class="underline">Remove</button>
        </form>
      </td>
      {% endif %}
    </tr>
    {% empty %}
    <tr><td colspan="5" class="text-center">No players registered.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
