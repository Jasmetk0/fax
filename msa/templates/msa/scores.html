{% extends "msa/base.html" %}
{% block msa_content %}
<!-- MSA-REDESIGN -->
<style>
  mark{ background: color-mix(in oklab, var(--accent) 30%, transparent); color: var(--text); padding: .05rem .25rem; border-radius: .25rem; }
</style>

<div class="max-w-7xl mx-auto px-4 py-6">
  <h1 class="text-2xl font-semibold mb-4">Scores</h1>

  <div class="flex items-center gap-2 mb-4">
    {% for key, label in tab_choices %}
      <a href="?tab={{ key }}{% if tour %}&tour={{ tour }}{% endif %}"
         class="segment focus-ring"
         data-tab="{{ key }}"
         data-active="{% if tab == key %}true{% else %}false{% endif %}">{{ label }}</a>
    {% endfor %}
  </div>

  <div id="tab-live" class="{% if tab != 'live' %}hidden{% endif %}">
    {% if live %}
      {% for match in live %}
        {% include "msa/partials/match_card.html" %}
      {% endfor %}
    {% else %}
      <div class="card p-6 text-[color:var(--muted)]">No live matches.</div>
    {% endif %}
  </div>

  <div id="tab-upcoming" class="{% if tab != 'upcoming' %}hidden{% endif %}">
    {% if upcoming %}
      {% for match in upcoming %}
        {% include "msa/partials/match_card.html" %}
      {% endfor %}
    {% else %}
      <div class="card p-6 text-[color:var(--muted)]">No upcoming matches.</div>
    {% endif %}
  </div>

  <div id="tab-results" class="{% if tab != 'results' %}hidden{% endif %}">
    {% if results %}
      {% for match in results %}
        {% include "msa/partials/match_card.html" %}
      {% endfor %}
    {% else %}
      <div class="card p-6 text-[color:var(--muted)]">No results yet.</div>
    {% endif %}
  </div>
</div>

<script>
  // Udržuj vizuální stav tabů podle URL ?tab=
  (function(){
    const url=new URL(location.href);
    const selected=(url.searchParams.get("tab")||"live").toLowerCase();
    const tabs=["live","upcoming","results"];
    tabs.forEach(t=>{
      const el=document.getElementById("tab-"+t);
      const link=document.querySelector(`[data-tab="${t}"]`);
      if(el && link){
        const active=(t===selected);
        el.classList.toggle("hidden", !active);
        link.dataset.active = active ? "true" : "false";
      }
    });
  })();
</script>
{% endblock %}
