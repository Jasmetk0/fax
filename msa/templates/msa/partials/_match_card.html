<div class="match-card mb-2">
  {% if item.bye %}
    <div class="text-xs">
      BYE â†’ {{ item.p1_entry.player.name }}
      {% if item.p1_entry.seed %}<span class="seed-badge">#{{ item.p1_entry.seed }}</span>{% endif %}
      {% if item.p1_entry.entry_type in 'QLL' %}
        <span class="entry-chip">{{ item.p1_entry.entry_type }}</span>
        {% if item.p1_entry.origin_note %}<span class="origin-note">{{ item.p1_entry.origin_note }}</span>{% endif %}
        {% if item.p1_entry.origin_match %}<a href="{% url 'msa:match-edit' item.p1_entry.origin_match.pk %}" class="origin-link">link</a>{% endif %}
      {% endif %}
    </div>
  {% else %}
    <div>
      <span class="{% if item.match and item.match.winner_id == item.p1.id %}font-bold{% endif %}">
        {{ item.p1.name }}
        {% if item.p1_entry and item.p1_entry.seed %}<span class="seed-badge">#{{ item.p1_entry.seed }}</span>{% endif %}
        {% if item.p1_entry and item.p1_entry.entry_type in 'QLL' %}
          <span class="entry-chip">{{ item.p1_entry.entry_type }}</span>
          {% if item.p1_entry.origin_note %}<span class="origin-note">{{ item.p1_entry.origin_note }}</span>{% endif %}
          {% if item.p1_entry.origin_match %}<a href="{% url 'msa:match-edit' item.p1_entry.origin_match.pk %}" class="origin-link">link</a>{% endif %}
        {% endif %}
      </span>
      vs
      <span class="{% if item.match and item.match.winner_id == item.p2.id %}font-bold{% endif %}">
        {{ item.p2.name }}
        {% if item.p2_entry and item.p2_entry.seed %}<span class="seed-badge">#{{ item.p2_entry.seed }}</span>{% endif %}
        {% if item.p2_entry and item.p2_entry.entry_type in 'QLL' %}
          <span class="entry-chip">{{ item.p2_entry.entry_type }}</span>
          {% if item.p2_entry.origin_note %}<span class="origin-note">{{ item.p2_entry.origin_note }}</span>{% endif %}
          {% if item.p2_entry.origin_match %}<a href="{% url 'msa:match-edit' item.p2_entry.origin_match.pk %}" class="origin-link">link</a>{% endif %}
        {% endif %}
      </span>
      {% if item.match and item.match.scoreline %}<span class="score ml-1">{{ item.match.scoreline }}</span>{% endif %}
      {% if is_admin and not print_mode and item.match %}
      <form method="post" class="inline ml-2">
        {% csrf_token %}
        <input type="hidden" name="action" value="match_result" />
        <input type="hidden" name="match_id" value="{{ item.match.id }}" />
        <label class="text-xs mr-1"><input type="radio" name="result_type" value="NORMAL" checked /> Normal</label>
        <label class="text-xs mr-1"><input type="radio" name="result_type" value="WO" /> WO</label>
        <label class="text-xs mr-1"><input type="radio" name="result_type" value="RET" /> RET</label>
        <input type="text" name="scoreline" class="border px-1 py-0.5 w-24 text-xs" placeholder="Score" />
        <select name="retired_player_id" class="border px-1 py-0.5 text-xs">
          <option value="">--retired--</option>
          <option value="{{ item.match.player1_id }}">{{ item.match.player1.name }}</option>
          <option value="{{ item.match.player2_id }}">{{ item.match.player2.name }}</option>
        </select>
        <button class="px-2 py-0.5 border rounded text-xs">Save</button>
      </form>
      {% endif %}
    </div>
  {% endif %}
</div>
