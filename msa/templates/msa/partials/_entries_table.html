<table class="mt-4">
  <thead>
    <tr>
      <th>#</th>
      <th>Player</th>
      <th>Type</th>
      <th>Status</th>
      <th>Seed</th>
      <th>Origin</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for entry in entries %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td>{{ entry.player.name }}</td>
      <td>{{ entry.entry_type }}</td>
      <td>{{ entry.status }}</td>
      <td>{{ entry.seed }}</td>
      <td>{{ entry.origin_note }}</td>
      <td>
        <form method="post" style="display:inline">
          {% csrf_token %}
          <input type="hidden" name="action" value="entry_update_type" />
          <input type="hidden" name="entry_id" value="{{ entry.id }}" />
          <select name="entry_type">
            {% for code, label in entry_type_choices %}
            <option value="{{ code }}" {% if entry.entry_type == code %}selected{% endif %}>{{ code }}</option>
            {% endfor %}
          </select>
          <button type="submit">Update</button>
        </form>
        {% if entry.status == 'active' %}
        <form method="post" style="display:inline">
          {% csrf_token %}
          <input type="hidden" name="action" value="entry_withdraw" />
          <input type="hidden" name="entry_id" value="{{ entry.id }}" />
          <button type="submit">Withdraw</button>
        </form>
        {% if tournament.state == 'drawn' or tournament.state == 'live' or tournament.state == 'complete' %}
          {% if entry.entry_type == 'DA' or entry.entry_type == 'WC' or entry.entry_type == 'Q' %}
        <a href="{% url 'msa:tournament-draw' tournament.slug %}" class="ml-2 text-xs underline">Replace to slot</a>
          {% endif %}
        {% endif %}
        {% elif entry.status == 'withdrawn' %}
        <form method="post" style="display:inline">
          {% csrf_token %}
          <input type="hidden" name="action" value="entry_reactivate" />
          <input type="hidden" name="entry_id" value="{{ entry.id }}" />
          <button type="submit">Reactivate</button>
        </form>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
