{% extends 'msa/tournament_base.html' %}
{% block tournament_content %}
<div class="mt-4">
  {% if print_mode %}
    <h1 class="text-2xl">{{ tournament.name }}</h1>
    <p>{{ tournament.start_date }} - {{ tournament.end_date }}</p>
  {% else %}
    {% if is_admin and not is_public %}
    <div class="flex gap-2 mb-4">
      <a href="{% url 'msa:tournament-draw' tournament.slug %}?action=generate" class="px-3 py-1 border rounded hover:bg-gray-50 text-sm">Generate draw</a>
      <a href="{% url 'msa:tournament-draw' tournament.slug %}?action=regenerate" class="px-3 py-1 border rounded hover:bg-red-50 text-sm text-red-600">Regenerate (danger)</a>
        <a href="{% url 'msa:tournament-draw' tournament.slug %}?action=progress" class="px-3 py-1 border rounded hover:bg-gray-50 text-sm">Generate next round</a>
        <a href="{% url 'msa:tournament-draw' tournament.slug %}?print=1" target="_blank" class="px-3 py-1 border rounded hover:bg-gray-50 text-sm">Print (clean)</a>
      </div>
    <form method="post" class="flex gap-2 items-center mb-4">
      {% csrf_token %}
      <input type="hidden" name="action" value="swap" />
      <input name="slot_a" type="number" min="1" class="border px-2 py-1 w-24" placeholder="Slot A" />
      <input name="slot_b" type="number" min="1" class="border px-2 py-1 w-24" placeholder="Slot B" />
      <button class="px-3 py-1 border rounded text-sm">Swap slots</button>
    </form>
    <form method="post" class="flex gap-2 items-center mb-4">
      {% csrf_token %}
      <input type="hidden" name="action" value="replace" />
      <input name="slot" type="number" min="1" class="border px-2 py-1 w-20" placeholder="Slot" />
      <input name="entry_id" type="number" class="border px-2 py-1 w-28" placeholder="Entry ID (ALT/LL)" />
      <button class="px-3 py-1 border rounded text-sm">Replace</button>
    </form>
    <form method="post" class="mb-4">
      {% csrf_token %}
      <input type="hidden" name="action" value="alt_autofill" />
      <button class="px-3 py-1 border rounded text-sm">ALT auto-fill</button>
    </form>
    <form method="post" class="flex gap-2 items-center mb-4">
      {% csrf_token %}
      <input type="hidden" name="action" value="withdraw_slot_ll" />
      <input name="slot" type="number" min="1" class="border px-2 py-1 w-20" placeholder="Slot" />
      <button class="px-3 py-1 border rounded text-sm">Withdraw & LL</button>
    </form>
    <form method="post" class="flex gap-2 items-center mb-4">
      {% csrf_token %}
      <input type="hidden" name="action" value="promote_ll_to_slot" />
      <input name="slot" type="number" min="1" class="border px-2 py-1 w-20" placeholder="Slot" />
      <button class="px-3 py-1 border rounded text-sm">Promote LL</button>
    </form>
    <form method="post" class="mb-4">
      {% csrf_token %}
      <input type="hidden" name="action" value="rebuild_live_points" />
      <button class="px-3 py-1 border rounded text-sm">Rebuild live points</button>
    </form>
    {% include 'msa/partials/_share_buttons.html' %}
    {% endif %}
  {% endif %}

  {% if messages and not print_mode %}
  <ul class="mb-3">
    {% for message in messages %}
    <li class="text-sm">{{ message }}</li>
    {% endfor %}
  </ul>
  {% endif %}

    {% include 'msa/partials/_bracket.html' %}
</div>
{% endblock %}
