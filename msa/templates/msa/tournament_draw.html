{% extends 'msa/tournament_base.html' %}
{% block tournament_content %}
<div class="mt-4">
  {% if is_admin %}
  <div class="flex gap-2 mb-4">
    <a
      href="{% url 'msa:tournament-draw' tournament.slug %}?action=generate"
      class="px-3 py-1 border rounded hover:bg-gray-50 text-sm"
      >Generate draw</a
    >
    <a
      href="{% url 'msa:tournament-draw' tournament.slug %}?action=regenerate"
      class="px-3 py-1 border rounded hover:bg-red-50 text-sm text-red-600"
      >Regenerate (danger)</a
    >
  </div>
  <form method="post" class="flex gap-2 items-center mb-4">
    {% csrf_token %}
    <input type="hidden" name="action" value="swap"/>
    <input name="slot_a" type="number" min="1" class="border px-2 py-1 w-24" placeholder="Slot A"/>
    <input name="slot_b" type="number" min="1" class="border px-2 py-1 w-24" placeholder="Slot B"/>
    <button class="px-3 py-1 border rounded text-sm">Swap slots</button>
  </form>
  <form method="post" class="flex gap-2 items-center mb-4">
    {% csrf_token %}
    <input type="hidden" name="action" value="replace"/>
    <input name="slot" type="number" min="1" class="border px-2 py-1 w-20" placeholder="Slot"/>
    <input name="entry_id" type="number" class="border px-2 py-1 w-28" placeholder="Entry ID (ALT/LL)"/>
    <button class="px-3 py-1 border rounded text-sm">Replace</button>
  </form>
  {% endif %}
  {% if messages %}
  <ul class="mb-3">
    {% for message in messages %}
    <li class="text-sm">{{ message }}</li>
    {% endfor %}
  </ul>
  {% endif %}
  {% if slots %}
  <ul class="list-disc list-inside">
    {% for entry in slots %}
    <li>
      {{ forloop.counter }}. {% if entry %}{{ entry.player.name }}{% else %}BYE{% endif %}
    </li>
    {% endfor %}
  </ul>
  {% else %}
  <p>No draw available.</p>
  {% endif %}
</div>
{% endblock %}
