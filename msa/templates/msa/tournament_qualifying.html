{% extends 'msa/tournament_base.html' %}
{% block tournament_content %}
<div class="mt-4">
  {% if print_mode %}
    <h1 class="text-2xl">{{ tournament.name }}</h1>
    <p>{{ tournament.start_date }} - {{ tournament.end_date }}</p>
  {% else %}
    {% if is_admin %}
    <div class="flex gap-2 mb-4">
      <a href="{% url 'msa:tournament-qualifying' tournament.slug %}?action=qual_generate" class="px-3 py-1 border rounded hover:bg-gray-50 text-sm">Generate qualifying</a>
      <a href="{% url 'msa:tournament-qualifying' tournament.slug %}?action=qual_regenerate" class="px-3 py-1 border rounded hover:bg-red-50 text-sm text-red-600">Regenerate qualifying</a>
      <a href="{% url 'msa:tournament-qualifying' tournament.slug %}?action=qual_progress" class="px-3 py-1 border rounded hover:bg-gray-50 text-sm">Progress qualifying</a>
      <a href="{% url 'msa:tournament-qualifying' tournament.slug %}?action=promote_qualifiers" class="px-3 py-1 border rounded hover:bg-gray-50 text-sm">Promote qualifiers</a>
      <a href="{% url 'msa:tournament-qualifying' tournament.slug %}?print=1" target="_blank" class="px-3 py-1 border rounded hover:bg-gray-50 text-sm">Print (clean)</a>
    </div>
    {% endif %}
  {% endif %}

  {% if messages and not print_mode %}
  <ul class="mb-3">
    {% for message in messages %}
    <li class="text-sm">{{ message }}</li>
    {% endfor %}
  </ul>
  {% endif %}

  {% if bracket_items %}
    {% include 'msa/partials/_bracket.html' with variant='qualifying' %}
  {% elif is_admin %}
    <p>No qualifying draw yet.</p>
    <a href="{% url 'msa:tournament-qualifying' tournament.slug %}?action=qual_generate" class="underline text-sm">Generate Qualifying</a>
  {% endif %}
</div>
{% endblock %}
